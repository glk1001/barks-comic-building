#: include reader-tree-view.kv

<MainScreen>:
    #orientation: "horizontal"
    size_hint: (1, 1)
    reader_contents: scroll_view
    intro_text: intro_text_box
    reader_contents_tree: tree_view
    title_page_button: title_page_button_id
    title_page_image: title_page_image_id
    minimum_height: self.height
    minimum_width: self.width

    AnchorLayout:
        anchor_x: "left"
        anchor_y: "top"

        ScrollView:
            id: scroll_view
            size_hint: (0.34, 0.95)

            do_scroll_x: False
            do_scroll_y: True
            always_overscroll: False
            effect_cls: "ScrollEffect"
            scroll_type: ["bars", "content"]

            bar_color: (0.8, 0.8, 0.8, 1)
            bar_inactive_color: (0.8, 0.8, 0.8, 0.8)
            bar_width: dp(5)

            ReaderTreeView:
                id: tree_view
                #padding: dp(50)
                #indent_start: dp(50)

    AnchorLayout:
        anchor_x: "right"
        anchor_y: "center"

        TextInput:
            id: intro_text_box
            multiline: True
            readonly: True
            opacity: 0.0
            size_hint: (0.66, 1)

    AnchorLayout:
        anchor_x: "right"
        anchor_y: "center"

        Button:
            id: title_page_button_id
            text: "push me"
            visible: True
            size_hint_y: 1.0
            size_hint_x: 0.66 if self.visible else 0
            opacity: 1 if self.visible else 0
            disabled: not self.visible

            TitlePageImage:
                id: title_page_image_id
                y: self.parent.y
                x: self.parent.x
                size: (self.parent.size[0], self.parent.size[1])
                source: "/tmp/1-01.jpg"
                fit_mode: "contain"
                allow_stretch: True
                opacity: 1 if self.parent.visible else 0
                on_press: root.image_pressed()
                #minimum_height: self.height
                #minimum_width: self.width
